CREATE TABLE language (
  id SERIAL PRIMARY KEY,
  name TEXT NOT NULL,
  code TEXT NOT NULL
);

CREATE TABLE user_account (
  id SERIAL PRIMARY KEY,
  name TEXT NOT NULL,
  password TEXT NOT NULL,
  registered TIMESTAMP NOT NULL DEFAULT NOW(),
  login_attempts INT NOT NULL DEFAULT 0
);

CREATE TABLE article (
  id SERIAL PRIMARY KEY,
  category_id INT REFERENCES category NOT NULL,
  timestamp TIMESTAMP NOT NULL DEFAULT NOW()
);

CREATE TABLE translated_article (
  id SERIAL PRIMARY KEY,
  topic TEXT NOT NULL,
  summary TEXT,
  text TEXT NOT NULL,
  url_name TEXT NOT NULL,
  published BOOLEAN NOT NULL,
  language_id INT REFERENCES language NOT NULL,
  article_id INT REFERENCES article NOT NULL
);

CREATE TABLE article_user (
  id SERIAL PRIMARY KEY,
  article_id INT REFERENCES article NOT NULL,
  user_id INT REFERENCES user_account NOT NULL
);

CREATE TABLE category (
  id SERIAL PRIMARY KEY,
  menu_weight INT NOT NULL,
  removed BOOLEAN NOT NULL DEFAULT FALSE,
  parent_id INT
);

CREATE TABLE translated_category (
  id SERIAL PRIMARY KEY,
  name TEXT NOT NULL,
  description TEXT,
  url_name TEXT NOT NULL,
  published BOOLEAN NOT NULL,
  language_id INT REFERENCES language NOT NULL,
  category_id INT REFERENCES category NOT NULL
);

CREATE TABLE visitedplace (
  id SERIAL PRIMARY KEY,
  locationname TEXT NOT NULL,
  lat TEXT NOT NULL,
  lng TEXT NOT NULL
);

INSERT INTO language (name, code) VALUES ('suomi', 'fi');
INSERT INTO language (name, code) VALUES ('english', 'en');